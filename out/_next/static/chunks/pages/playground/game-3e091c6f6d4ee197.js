(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[539],{4161:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/playground/game",function(){return r(2356)}])},5382:function(e,t,r){"use strict";var n=r(5893);r(7294);var s=r(9008),i=r.n(s),a=r(9226);let o=e=>{let{children:t,title:r="호구마 머신"}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i(),{children:(0,n.jsx)("title",{children:r})}),(0,n.jsxs)("header",{children:[(0,n.jsx)("img",{}),(0,n.jsx)("h1",{children:"호구마 머신"}),(0,n.jsx)(a.Z,{})]}),(0,n.jsx)("main",{children:t}),(0,n.jsx)("footer",{children:(0,n.jsx)("span",{children:"Next.js"})})]})};t.Z=o},9226:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var n=r(5893),s=r(1664),i=r.n(s);function a(){return(0,n.jsx)("menu",{children:(0,n.jsx)("li",{children:(0,n.jsx)(i(),{href:"/playground/new",children:"게임"})})})}},2356:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return d}});var n=r(5893),s=r(7294),i=r(1163),a=r(5382);let o=e=>{let{words:t,step:r}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{children:t}),(0,n.jsxs)("p",{children:[r.char," / ",r.isMyTurn?"O":"X"]})]})},h=new class{updateGameSetting(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.gameSetting.words||"호박고구마",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.gameSetting.memberCount||2,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.gameSetting.startIndex||1;if(this.reset(),null!==e){if(e.length)this.gameSetting.words=e;else throw Error("제시 단어가 잘못되었습니다. 입력값: ".concat(e))}if(null!==t){if(t>1)this.gameSetting.memberCount=t;else throw Error("참가인원이 잘못되었습니다. 입력값: ".concat(t))}if(null!==r){if(r>=0&&r<=this.gameSetting.memberCount)this.gameSetting.startIndex=r-1;else throw Error("순번이 잘못되었습니다. 입력값: ".concat(r))}}rearrangeWordsProcess(){let{words:e,memberCount:t,startIndex:r}=this.gameSetting,n=e.length>t?e.length:t,s=r;for(this.rearrangedWords=[];this.rearrangedWords.length<n;){for(;s>=e.length;)s-=e.length;if(this.rearrangedWords.push(e[s]),this.rearrangedWords.length>=e.length){let e=this.findRepeatingWords(this.rearrangedWords);if(e)break}s+=t}this.saveHistory()}findRepeatingWords(e){for(let t=0;t<e.length;t++){let r=e.slice(0,t+1),n=!0;for(let t=0;t<e.length;t+=r.length)if(e.slice(t,t+r.length).join("")!==r.join("")){n=!1;break}if(n)return r}return null}saveHistory(){this.history.length>10&&this.history.splice(0,1),this.history.push({gameSetting:{...this.gameSetting},rearrangedWords:[...this.rearrangedWords]})}getHistory(){return this.history}changeStartIndex(e){this.updateGameSetting(null,null,e),this.rearrangeWordsProcess()}changeMemberCount(e,t){this.updateGameSetting(null,e,t),this.rearrangeWordsProcess()}changeWords(e,t,r){this.updateGameSetting(e,t,r),this.rearrangeWordsProcess()}getRearrangeWords(){return{gameSetting:this.gameSetting,rearrangedWords:this.rearrangedWords}}reset(){this.wordsIndex=0,this.count=0}async nextStep(){return new Promise((e,t)=>{let r=this.isCountUserOnly?2:1;for(;r>0;){r-=1,this.count+=1;let t=this.getStep();this.wordsIndex+=1,this.wordsIndex>this.gameSetting.words.length-1&&(this.wordsIndex=0),e(t)}t(null)})}getStep(){let e={char:this.gameSetting.words[this.wordsIndex],isMyTurn:!1,totalCount:this.count};return this.count%this.gameSetting.memberCount-1==0&&(e.isMyTurn=!0),e}constructor(e,t,r){this.date=new Date,this.history=[],this.gameSetting={words:"",memberCount:2,startIndex:0},this.wordsIndex=0,this.count=0,this.isCountUserOnly=!1,this.updateGameSetting(e,t,r),this.rearrangeWordsProcess()}};function d(){let e=(0,i.useRouter)(),t=(Array.isArray(e.query.words)?e.query.words[0]:e.query.words)||"호박고구마",r=Number(Array.isArray(e.query.memberCount)?e.query.memberCount[0]:e.query.memberCount),d=Number(Array.isArray(e.query.startNumber)?e.query.startNumber[0]:e.query.startNumber);r=isNaN(r)?2:r,d=isNaN(d)?1:d,(0,s.useEffect)(()=>{});let u=h.getRearrangeWords(),g=h.getStep(),l=async()=>{(g=await h.nextStep())&&(console.log(g,h.date),m(c+1)),u=h.getRearrangeWords()},[c,m]=(0,s.useState)(0);return(0,n.jsxs)(a.Z,{title:"호구마 게임",children:[(0,n.jsx)(o,{words:t,step:g}),(0,n.jsx)("h1",{children:c}),(0,n.jsx)("p",{children:u.rearrangedWords}),(0,n.jsx)("button",{onClick:l,children:"▶"})]})}},1163:function(e,t,r){e.exports=r(6885)}},function(e){e.O(0,[996,774,888,179],function(){return e(e.s=4161)}),_N_E=e.O()}]);